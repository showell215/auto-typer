<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Auto Typer Test Page</title>
    <style>
        body {
                margin: 20px;
            }
            .config-example {
                background: lightgray;
                padding: 20px;
                display: flex;
                flex-direction: column;
                align-items: center;
            }
            #config-changer {
                width: calc(35% - 44px);
                display: inline-block;
                float: left;
                border: 2px solid black;
            }
            #demo {
                width: calc(65% - 84px);
                display: inline-block;
                float: left;
                border: 2px black solid;
                padding: 20px;
                font-size: 3rem;
            }
            #auto-typer-target {
                /* line-height: 32px; */
            }
            .auto-typer-cursor {
                /* line-height: 26px; */
            }
            #config-form {
                padding: 20px;
                background: beige;
                display: flex;
                flex-direction: column;
                align-items: center;
                margin: 0;
            }
            .hidden {
                display: none;
            }
            .highlight {
                background-color: yellow;
            }
            .config-entry {
                transition: background-color .5s ease-in-out;
            }
            section {
                margin: 20px;
            }
            @media only screen and (max-width: 759px) {
                #demo, #config-changer {
                    width: 100%;
                }
            }
        </style>
</head>

<body>
    <div>
        <a href="https://github.com/showell215/auto-typer">See on Github</a>
    </div>
    <div style="display: flex; flex-direction: row">
        <section id="config-changer">
            <div class="config-example">
                <code>
                        <div>{</div>
                        <div class="config-entry deleteInterval">
                            <span>&nbsp&nbsp</span><span>deleteInterval: </span><span class="config-value">100</span>,
                        </div>
                        <div class="config-entry addInterval">
                            <span>&nbsp&nbsp</span><span>addInterval: </span><span class="config-value">100</span>,
                        </div>
                        <div class="config-entry deleteDelay">
                            <span>&nbsp&nbsp</span><span>deleteDelay: </span><span class="config-value">1000</span>,
                        </div>
                        <div class="config-entry addDelay">
                            <span>&nbsp&nbsp</span><span>addDelay: </span><span class="config-value">1000</span>,
                        </div>
                        <div class="config-entry cursorOn">
                            <span>&nbsp&nbsp</span><span>cursorOn: </span><span class="config-value">true</span>,
                        </div>
                        <div class="config-entry behavior">
                            <span>&nbsp&nbsp</span><span>behavior: </span><span>"</span><span class="config-value">alternate</span><span>"</span>
                        </div>
                        <div>}</div>
                    </code>
            </div>
            <div style="text-align: center; padding: 20px">
                <button onclick="restart(autoTyper.customOptions)">Restart with same settings</button>
                <button onclick="restart()">Reset</button>
                <!-- TODO bind values to labels and object -->
            </div>
            <form id="config-form">
                <div>
                    <h2>Delete interval</h2>
                    <input value="100" list="delete-interval-tickmarks" type="range" min="0" max="1000" step="100" id="deleteInterval"
                        onchange="updateValue(this.id, this.value)">
                    <datalist id="delete-interval-tickmarks">
                        <option value="0">
                        <option value="100">
                        <option value="200">
                        <option value="300">
                        <option value="400">
                        <option value="500">
                        <option value="600">
                        <option value="700">
                        <option value="800">
                        <option value="900">
                        <option value="1000">
                    </datalist>
                    <div><label for="deleteInterval">100</label></div>
                </div>
                <div>
                    <h2>Add interval</h2>
                    <input value="100" list="add-interval-tickmarks" type="range" min="0" max="1000" step="100" id="addInterval"
                        onchange="updateValue(this.id, this.value)">
                    <datalist id="add-interval-tickmarks">
                        <option value="0">
                        <option value="100">
                        <option value="200">
                        <option value="300">
                        <option value="400">
                        <option value="500">
                        <option value="600">
                        <option value="700">
                        <option value="800">
                        <option value="900">
                        <option value="1000">
                    </datalist>
                    <div><label for="addInterval">100</label></div>
                </div>
                <div>
                    <h2>Delete delay</h2>
                    <input value="1000" list="delete-delay-tickmarks" type="range" min="0" max="5000" step="500" id="deleteDelay"
                        onchange="updateValue(this.id, this.value)">
                    <datalist id="delete-delay-tickmarks">
                        <option value="0">
                        <option value="500">
                        <option value="1000">
                        <option value="1500">
                        <option value="2000">
                        <option value="2500">
                        <option value="3000">
                        <option value="3500">
                        <option value="4000">
                        <option value="4500">
                        <option value="5000">
                    </datalist>
                    <div><label for="deleteDelay">100</label></div>
                </div>
                <div>
                    <h2>Add delay</h2>
                    <input value="1000" list="add-delay-tickmarks" type="range" min="0" max="5000" step="500" id="addDelay"
                        onchange="updateValue(this.id, this.value)">
                    <datalist id="add-delay-tickmarks">
                        <option value="0">
                        <option value="500">
                        <option value="1000">
                        <option value="1500">
                        <option value="2000">
                        <option value="2500">
                        <option value="3000">
                        <option value="3500">
                        <option value="4000">
                        <option value="4500">
                        <option value="5000">
                    </datalist>
                    <div><label for="addDelay">100</label></div>
                </div>
                <div>
                    <h2>Cursor on/off</h2>
                    <input checked name="cursorOn" type="radio" value="true" id="cursor-on" onchange="updateValue(this.name, this.value)">
                    <label for="cursor-on">true</label>
                    <input name="cursorOn" type="radio" value="false" id="cursor-off" onchange="updateValue(this.name, this.value)">
                    <label for="cursor-off">false</label>
                </div>
                <div>
                    <h2>Behavior</h2>
                    <!-- <input checked name="cursorOn" type="radio" value="true" id="cursor-on" onchange="updateValue(this.name, this.value)">
                        <label for="cursor-on">true</label>
                        <input name="cursorOn" type="radio" value="false" id="cursor-off" onchange="updateValue(this.name, this.value)">
                        <label for="cursor-off">false</label> -->
                    <select name="behavior" id="behavior" onchange="updateValue(this.id, this.value)">
                        <option value="alternate" selected>Alternate</option>
                        <option value="writeOnly">Write only</option>
                    </select>
                </div>

            </form>
        </section>
        <section id="demo">
            <span id="auto-typer-target" data-auto-typer-text="This is a test., And this is a second test., Third test."></span>
        </section>
    </div>
    <script src="https://cdn.jsdelivr.net/gh/showell215/auto-typer/index.js"></script>
    <script>
        var autoTyper;

        function updateValue(id, value) {
            console.log(id, value);
            var label, thisConfigEntry;
            if (label = document.querySelector("label[for='" + id + "'")) {
                label.textContent = value;
            }
            // document.querySelector("label[for='" + id + "'").textContent = value;
            thisConfigEntry = document.querySelector(".config-entry" + "." + id);
            thisConfigEntry.classList.add("highlight");
            setTimeout(function () {
                thisConfigEntry.classList.remove("highlight");
            }, 1500);
            thisConfigEntry.querySelector(".config-value").textContent = value;
            updateAutoTyperOption(id, value);
        }

        function updateAutoTyperOption(id, value) {
            switch (id) {
                case 'cursorOn':
                    document.querySelector('.auto-typer-cursor').classList.toggle('hidden');
                    break;
                case 'behavior':
                    restart(Object.assign(autoTyper.customOptions, { behavior: value }));
                    break;
                default:
                    autoTyper[id] = value;
                    break;
            }
        }

        function restart(options) {
            autoTyper.destroy();
            autoTyper = null;
            autoTyper = new AutoTyper(options);
            autoTyper.init();
        }

        window.addEventListener("DOMContentLoaded", function () {
            autoTyper = new AutoTyper();
            autoTyper.init();
        });
    </script>
</body>

</html>
